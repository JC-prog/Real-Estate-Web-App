import mysql from 'mysql';

// Create a connection to the database
const db = mysql.createConnection({
	host: "localhost",
	user: "root",
	password: " admin",
	database: "realestate"
});

// Connect to the database
db.connect((err) => {
  if (err) {
    console.error('Error connecting to database:', err);
    return;
  }
  console.log('Connected to database!');
});

// Function to create table if it doesn't exist
function createTableIfNotExists(tableName, tableDefinition) {
  const checkTableExistsQuery = `SHOW TABLES LIKE '${tableName}'`;
  connection.query(checkTableExistsQuery, (error, results, fields) => {
    if (error) {
      console.error('Error checking if table exists:', error);
      return;
    }

    if (results.length === 0) {
      // Table does not exist, create it
      const createTableQuery = `CREATE TABLE ${tableName} ${tableDefinition}`;
      connection.query(createTableQuery, (error) => {
        if (error) {
          console.error('Error creating table:', error);
          return;
        }
        console.log(`Table ${tableName} created successfully.`);
      });
    } else {
      console.log(`Table ${tableName} already exists.`);
    }
  });
}

// Example usage:
/*
const tableName = 'your_table_name';
const tableDefinition = '(id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(255), email VARCHAR(255))';

createTableIfNotExists(tableName, tableDefinition);
*/